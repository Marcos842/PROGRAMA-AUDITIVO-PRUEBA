<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transcriptor para Personas Sordas</title>
    <link rel="stylesheet" href="estilo.css">
</head>
<body>
    <div id="pantalla-principal">
        <h1>ğŸ¤ Transcriptor en Tiempo Real</h1>

        <!-- Sala Compartida -->
        <div class="sala-compartida">
            <h3>ğŸŒ Sala Compartida</h3>
            
            <div class="codigo-sala">
                <label>CÃ³digo de Sala:</label>
                <input type="text" id="codigo-sala" placeholder="Ej: SALA123" maxlength="20">
                
                <label>Tu Nombre:</label>
                <input type="text" id="mi-nombre" placeholder="Tu nombre" maxlength="30">
                
                <button id="conectar-sala" class="conectar">ğŸ”— Conectar</button>
                <button id="desconectar-sala" class="desconectar" style="display: none;">âŒ Desconectar</button>
            </div>
            
            <div class="estado-conexion" id="estado-conexion">âšª Sin conexiÃ³n</div>
            
            <!-- Personas Conectadas -->
            <div id="personas-conectadas" style="display: none;">
                <h4>ğŸ‘¥ Personas en la sala:</h4>
                <ul id="lista-personas"></ul>
            </div>
        </div>

        <!-- Compartir Pantalla -->
        <div class="compartir-pantalla-section">
            <h3>ğŸ“º Compartir Pantalla</h3>
            
            <button id="btn-compartir" class="btn-screen">
                ğŸ–¥ï¸ Compartir mi Pantalla
            </button>
            
            <button id="btn-detener-compartir" class="btn-stop-screen" style="display: none;">
                â¹ï¸ Detener Compartir
            </button>
            
            <!-- Video local (tu pantalla) -->
            <div id="contenedor-video-local" style="display: none; margin-top: 15px;">
                <h4>ğŸ“¤ Tu Pantalla:</h4>
                <video id="video-local" autoplay muted playsinline></video>
            </div>
            
            <!-- Video remoto (pantalla de otro) -->
            <div id="contenedor-video-remoto" style="display: none; margin-top: 15px;">
                <h4>ğŸ“¥ Pantalla Compartida:</h4>
                <video id="video-remoto" autoplay playsinline></video>
            </div>
        </div>

        <!-- ConfiguraciÃ³n de Hablantes -->
        <div class="config-hablantes">
            <h3>ğŸ‘¥ Configurar Hablantes</h3>
            <div class="inputs-hablantes">
                <input type="text" id="nombre-a" placeholder="Nombre Hablante A" maxlength="30">
                <input type="text" id="nombre-b" placeholder="Nombre Hablante B" maxlength="30">
                <input type="text" id="nombre-c" placeholder="Nombre Hablante C" maxlength="30">
            </div>
        </div>

        <!-- Indicador de Hablante Actual -->
        <div id="hablante-actual">
            ğŸ™ï¸ Hablando ahora: <span id="nombre-actual">Hablante A</span>
        </div>

        <!-- Controles -->
        <div class="controles">
            <button id="iniciar">â–¶ï¸ Iniciar</button>
            <button id="detener" class="detener">â¹ï¸ Detener</button>
            <button id="cambiar-hablante" class="cambiar">ğŸ”„ Cambiar Hablante</button>
            <button id="limpiar" class="limpiar">ğŸ—‘ï¸ Limpiar</button>
            <button id="guardar">ğŸ’¾ Guardar</button>
            <button id="exportar">ğŸ“¥ Exportar CSV</button>
        </div>

        <!-- TranscripciÃ³n -->
        <div id="transcripcion">
            <h2>ğŸ“ ConversaciÃ³n:</h2>
            <div id="texto-temporal"></div>
            <div id="texto-final"></div>
        </div>

        <!-- Historial -->
        <div id="historial">
            <div class="historial-header">
                <h2>ğŸ“š Historial</h2>
                <button id="borrar-historial" class="borrar-historial">ğŸ—‘ï¸ Borrar Todo</button>
            </div>
            <div id="lista-conversaciones"></div>
        </div>
    </div>

    <!-- Alertas de Sonido -->
    <div id="alertas-sonido"></div>

    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="app.js"></script>
</body>
</html>
